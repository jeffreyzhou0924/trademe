INFO:     Will watch for changes in these directories: ['/root/trademe/backend/trading-service']
INFO:     Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
INFO:     Started reloader process [3761420] using StatReload
/usr/local/lib/python3.12/dist-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'schema_extra' has been renamed to 'json_schema_extra'
  warnings.warn(message, UserWarning)
2025-09-13 18:51:22.435 | INFO     | app.services.okx_service:__init__:116 - ğŸš€ OKXäº¤æ˜“æœåŠ¡åˆå§‹åŒ–å®Œæˆ
INFO:app.services.wallet_generator:å¤šé“¾é’±åŒ…ç”Ÿæˆå™¨åˆå§‹åŒ–å®Œæˆ
INFO:app.security.crypto_manager:åŠ å¯†ç®¡ç†å™¨åˆå§‹åŒ–å®Œæˆ
/usr/local/lib/python3.12/dist-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'schema_extra' has been renamed to 'json_schema_extra'
  warnings.warn(message, UserWarning)
âœ… ä½¿ç”¨logging.yamlé…ç½®æ–‡ä»¶
âœ… APIéªŒè¯ä¸­é—´ä»¶é›†æˆæˆåŠŸ
2025-09-13 18:51:23 | uvicorn.error | INFO | Started server process [3761437]
2025-09-13 18:51:23 | uvicorn.error | INFO | Waiting for application startup.
2025-09-13 18:51:23 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/auth/register, å­—æ®µæ•°: 2
2025-09-13 18:51:23 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/auth/login, å­—æ®µæ•°: 2
2025-09-13 18:51:23 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/trading/orders, å­—æ®µæ•°: 5
2025-09-13 18:51:23 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/strategies, å­—æ®µæ•°: 3
2025-09-13 18:51:23 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/ai/chat, å­—æ®µæ•°: 3
2025-09-13 18:51:23 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/market-data/klines, å­—æ®µæ•°: 3
2025-09-13 18:51:23 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/backtest, å­—æ®µæ•°: 5
2025-09-13 18:51:23 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/wallet/transfer, å­—æ®µæ•°: 3
2025-09-13 18:51:23 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/data/download, å­—æ®µæ•°: 5
âœ… æ•°æ®åº“åˆå§‹åŒ–æˆåŠŸ
ğŸ“‹ åŒ…å«çš„è¡¨ï¼šç”¨æˆ·ã€ç­–ç•¥ã€å›æµ‹ã€äº¤æ˜“ã€APIå¯†é’¥ã€å¸‚åœºæ•°æ®ã€Claudeå¯¹è¯ã€äº¤æ˜“å¿ƒå¾—
ğŸ“‹ ç®¡ç†åå°è¡¨ï¼šç®¡ç†å‘˜ã€Claudeä»£ç†æ± ã€USDTæ”¯ä»˜ã€æ•°æ®é‡‡é›†
âœ… Redisè¿æ¥æˆåŠŸ
ğŸ”‘ OKX APIè®¤è¯æˆåŠŸï¼Œå·²è¿æ¥åˆ°çœŸå®äº¤æ˜“æ¥å£
ğŸš€ Trading Service å¯åŠ¨æˆåŠŸ
ğŸ“Š ç¯å¢ƒ: development
ğŸ  Host: 0.0.0.0:8001
2025-09-13 18:51:23 | uvicorn.error | INFO | Application startup complete.
2025-09-13 18:52:13 | app.middleware.api_validation_middleware | INFO | APIè¯·æ±‚: {"method": "POST", "url": "http://localhost:8001/api/v1/realtime-backtest/start", "path": "/api/v1/realtime-backtest/start", "client_ip": "127.0.***.***.***", "user_agent": "curl/8.5.0", "timestamp": "2025-09-13T10:52:13.079401", "headers": {"host": "localhost:8001", "user-agent": "curl/8.5.0", "accept": "*/*", "content-type": "application/json", "authorization": "Bearer eyJhbGciOi...4t5eH0", "content-length": "290"}, "body": {"strategy_code": "# Simple test strategy\ndef on_data(data):\n    return {\"signal\": \"hold\"}", "exchange": "binance", "symbols": ["BTC/USDT"], "timeframes": ["1h"], "initial_capital": 10000.0, "start_date": "2025-07-01", "end_date": "2025-07-31", "data_type": "kline"}}
2025-09-13 18:52:13 | app.services.api_validation_service | WARNING | ç«¯ç‚¹éªŒè¯é…ç½®ä¸å­˜åœ¨: /api/v1/realtime-backtest/start
2025-09-13 18:52:13.081 | INFO     | app.middleware.structured_logging:log_request_start:139 - Request started
2025-09-13 18:52:13.086 | INFO     | app.middleware.structured_logging:log_request_end:181 - Request completed in 0.005s
2025-09-13 18:52:13 | app.middleware.api_validation_middleware | INFO | APIå“åº”: {"method": "POST", "path": "/api/v1/realtime-backtest/start", "status_code": 200, "duration": 7.25, "timestamp": "2025-09-13T10:52:13.086570"}
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.12/logging/__init__.py", line 464, in format
    return self._format(record)
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 460, in _format
    return self._fmt % values
           ~~~~~~~~~~^~~~~~~~
KeyError: 'duration'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.12/logging/handlers.py", line 73, in emit
    if self.shouldRollover(record):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/handlers.py", line 196, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 706, in format
    s = self.formatMessage(record)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 675, in formatMessage
    return self._style.format(record)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 466, in format
    raise ValueError('Formatting field not found in record: %s' % e)
ValueError: Formatting field not found in record: 'duration'
Call stack:
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.12/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.12/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/usr/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/usr/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
  File "/usr/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
  File "/usr/lib/python3.12/asyncio/base_events.py", line 1987, in _run_once
    handle._run()
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/dist-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/base.py", line 185, in __call__
    await response(scope, wrapped_receive, send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/base.py", line 214, in __call__
    await send(
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/errors.py", line 161, in _send
    await send(message)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/protocols/http/h11_impl.py", line 473, in send
    self.access_logger.info(
Message: '%s - "%s %s HTTP/%s" %d'
Arguments: ('127.0.0.1:38138', 'POST', '/api/v1/realtime-backtest/start', '1.1', 200)
2025-09-13 18:52:15.093 | INFO     | app.api.v1.realtime_backtest:_prepare_data:599 - ğŸ“Š ç›´æ¥ä»æ•°æ®åº“è·å–çœŸå®å†å²æ•°æ®: 2025-07-01 00:00:00 - 2025-07-31 00:00:00
2025-09-13 18:52:15.093 | INFO     | app.api.v1.realtime_backtest:_fetch_market_data:626 - ğŸ“Š æŸ¥è¯¢æ•°æ®åº“ä¸­çš„ BTC/USDT æ•°æ®...
2025-09-13 18:52:15.290 | ERROR    | app.api.v1.realtime_backtest:_fetch_market_data:667 - âŒ BINANCEäº¤æ˜“æ‰€çš„BTC/USDT åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´(2025-07-01 åˆ° 2025-07-31)å†…å†å²æ•°æ®ä¸è¶³ï¼ˆä»…0æ¡è®°å½•ï¼Œéœ€è¦è‡³å°‘10æ¡ï¼‰ï¼Œæ— æ³•è¿›è¡Œæœ‰æ•ˆå›æµ‹ã€‚
ğŸ’¡ å»ºè®®ï¼šç›®å‰ç³»ç»Ÿåªæœ‰OKXäº¤æ˜“æ‰€çš„æ•°æ®å¯ç”¨è¯·é€‰æ‹©æœ‰å……è¶³æ•°æ®çš„æ—¶é—´èŒƒå›´ã€äº¤æ˜“æ‰€æˆ–äº¤æ˜“å¯¹è¿›è¡Œå›æµ‹
2025-09-13 18:52:15.290 | ERROR    | app.api.v1.realtime_backtest:_fetch_market_data:672 - âŒ BTC/USDT æ•°æ®åº“æŸ¥è¯¢å¤±è´¥: âŒ BINANCEäº¤æ˜“æ‰€çš„BTC/USDT åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´(2025-07-01 åˆ° 2025-07-31)å†…å†å²æ•°æ®ä¸è¶³ï¼ˆä»…0æ¡è®°å½•ï¼Œéœ€è¦è‡³å°‘10æ¡ï¼‰ï¼Œæ— æ³•è¿›è¡Œæœ‰æ•ˆå›æµ‹ã€‚
ğŸ’¡ å»ºè®®ï¼šç›®å‰ç³»ç»Ÿåªæœ‰OKXäº¤æ˜“æ‰€çš„æ•°æ®å¯ç”¨è¯·é€‰æ‹©æœ‰å……è¶³æ•°æ®çš„æ—¶é—´èŒƒå›´ã€äº¤æ˜“æ‰€æˆ–äº¤æ˜“å¯¹è¿›è¡Œå›æµ‹
2025-09-13 18:52:15.290 | ERROR    | app.api.v1.realtime_backtest:_prepare_data:613 - âŒ æ•°æ®å‡†å¤‡å¤±è´¥: âŒ BINANCEäº¤æ˜“æ‰€çš„BTC/USDT åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´(2025-07-01 åˆ° 2025-07-31)å†…å†å²æ•°æ®ä¸è¶³ï¼ˆä»…0æ¡è®°å½•ï¼Œéœ€è¦è‡³å°‘10æ¡ï¼‰ï¼Œæ— æ³•è¿›è¡Œæœ‰æ•ˆå›æµ‹ã€‚
ğŸ’¡ å»ºè®®ï¼šç›®å‰ç³»ç»Ÿåªæœ‰OKXäº¤æ˜“æ‰€çš„æ•°æ®å¯ç”¨è¯·é€‰æ‹©æœ‰å……è¶³æ•°æ®çš„æ—¶é—´èŒƒå›´ã€äº¤æ˜“æ‰€æˆ–äº¤æ˜“å¯¹è¿›è¡Œå›æµ‹
2025-09-13 18:52:15.290 | ERROR    | app.api.v1.realtime_backtest:_execute_backtest:557 - å›æµ‹ä»»åŠ¡ b83928ec-865b-4fef-bd98-9893118bd7be å¤±è´¥: æ— æ³•è·å–å›æµ‹æ‰€éœ€çš„å†å²æ•°æ®: âŒ BINANCEäº¤æ˜“æ‰€çš„BTC/USDT åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´(2025-07-01 åˆ° 2025-07-31)å†…å†å²æ•°æ®ä¸è¶³ï¼ˆä»…0æ¡è®°å½•ï¼Œéœ€è¦è‡³å°‘10æ¡ï¼‰ï¼Œæ— æ³•è¿›è¡Œæœ‰æ•ˆå›æµ‹ã€‚
ğŸ’¡ å»ºè®®ï¼šç›®å‰ç³»ç»Ÿåªæœ‰OKXäº¤æ˜“æ‰€çš„æ•°æ®å¯ç”¨è¯·é€‰æ‹©æœ‰å……è¶³æ•°æ®çš„æ—¶é—´èŒƒå›´ã€äº¤æ˜“æ‰€æˆ–äº¤æ˜“å¯¹è¿›è¡Œå›æµ‹
2025-09-13 18:52:15.294 | ERROR    | app.api.v1.realtime_backtest:_execute_backtest:558 - å®Œæ•´é”™è¯¯å †æ ˆ: Traceback (most recent call last):
  File "/root/trademe/backend/trading-service/app/api/v1/realtime_backtest.py", line 610, in _prepare_data
    return await self._fetch_market_data(self.db_session, config, start_date, end_date)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/trademe/backend/trading-service/app/api/v1/realtime_backtest.py", line 673, in _fetch_market_data
    raise e
  File "/root/trademe/backend/trading-service/app/api/v1/realtime_backtest.py", line 668, in _fetch_market_data
    raise Exception(error_msg)
Exception: âŒ BINANCEäº¤æ˜“æ‰€çš„BTC/USDT åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´(2025-07-01 åˆ° 2025-07-31)å†…å†å²æ•°æ®ä¸è¶³ï¼ˆä»…0æ¡è®°å½•ï¼Œéœ€è¦è‡³å°‘10æ¡ï¼‰ï¼Œæ— æ³•è¿›è¡Œæœ‰æ•ˆå›æµ‹ã€‚
ğŸ’¡ å»ºè®®ï¼šç›®å‰ç³»ç»Ÿåªæœ‰OKXäº¤æ˜“æ‰€çš„æ•°æ®å¯ç”¨è¯·é€‰æ‹©æœ‰å……è¶³æ•°æ®çš„æ—¶é—´èŒƒå›´ã€äº¤æ˜“æ‰€æˆ–äº¤æ˜“å¯¹è¿›è¡Œå›æµ‹

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/trademe/backend/trading-service/app/api/v1/realtime_backtest.py", line 529, in _execute_backtest
    step_result = await step_info["action"](config, backtest_data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/trademe/backend/trading-service/app/api/v1/realtime_backtest.py", line 615, in _prepare_data
    raise Exception(f"æ— æ³•è·å–å›æµ‹æ‰€éœ€çš„å†å²æ•°æ®: {str(e)}")
Exception: æ— æ³•è·å–å›æµ‹æ‰€éœ€çš„å†å²æ•°æ®: âŒ BINANCEäº¤æ˜“æ‰€çš„BTC/USDT åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´(2025-07-01 åˆ° 2025-07-31)å†…å†å²æ•°æ®ä¸è¶³ï¼ˆä»…0æ¡è®°å½•ï¼Œéœ€è¦è‡³å°‘10æ¡ï¼‰ï¼Œæ— æ³•è¿›è¡Œæœ‰æ•ˆå›æµ‹ã€‚
ğŸ’¡ å»ºè®®ï¼šç›®å‰ç³»ç»Ÿåªæœ‰OKXäº¤æ˜“æ‰€çš„æ•°æ®å¯ç”¨è¯·é€‰æ‹©æœ‰å……è¶³æ•°æ®çš„æ—¶é—´èŒƒå›´ã€äº¤æ˜“æ‰€æˆ–äº¤æ˜“å¯¹è¿›è¡Œå›æµ‹

2025-09-13 18:53:01 | app.middleware.api_validation_middleware | INFO | APIè¯·æ±‚: {"method": "POST", "url": "http://localhost:8001/api/v1/realtime-backtest/start", "path": "/api/v1/realtime-backtest/start", "client_ip": "127.0.***.***.***", "user_agent": "curl/8.5.0", "timestamp": "2025-09-13T10:53:01.950860", "headers": {"host": "localhost:8001", "user-agent": "curl/8.5.0", "accept": "*/*", "content-type": "application/json", "authorization": "Bearer eyJhbGciOi...4t5eH0", "content-length": "286"}, "body": {"strategy_code": "# Simple test strategy\ndef on_data(data):\n    return {\"signal\": \"hold\"}", "exchange": "okx", "symbols": ["BTC/USDT"], "timeframes": ["1h"], "initial_capital": 10000.0, "start_date": "2025-07-01", "end_date": "2025-07-31", "data_type": "kline"}}
2025-09-13 18:53:01 | app.services.api_validation_service | WARNING | ç«¯ç‚¹éªŒè¯é…ç½®ä¸å­˜åœ¨: /api/v1/realtime-backtest/start
2025-09-13 18:53:01.952 | INFO     | app.middleware.structured_logging:log_request_start:139 - Request started
2025-09-13 18:53:01.955 | INFO     | app.middleware.structured_logging:log_request_end:181 - Request completed in 0.003s
2025-09-13 18:53:01 | app.middleware.api_validation_middleware | INFO | APIå“åº”: {"method": "POST", "path": "/api/v1/realtime-backtest/start", "status_code": 200, "duration": 4.77, "timestamp": "2025-09-13T10:53:01.955580"}
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.12/logging/__init__.py", line 464, in format
    return self._format(record)
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 460, in _format
    return self._fmt % values
           ~~~~~~~~~~^~~~~~~~
KeyError: 'duration'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.12/logging/handlers.py", line 73, in emit
    if self.shouldRollover(record):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/handlers.py", line 196, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 706, in format
    s = self.formatMessage(record)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 675, in formatMessage
    return self._style.format(record)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 466, in format
    raise ValueError('Formatting field not found in record: %s' % e)
ValueError: Formatting field not found in record: 'duration'
Call stack:
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.12/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.12/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/usr/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/usr/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
  File "/usr/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
  File "/usr/lib/python3.12/asyncio/base_events.py", line 1987, in _run_once
    handle._run()
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/dist-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/base.py", line 185, in __call__
    await response(scope, wrapped_receive, send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/base.py", line 214, in __call__
    await send(
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/errors.py", line 161, in _send
    await send(message)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/protocols/http/h11_impl.py", line 473, in send
    self.access_logger.info(
Message: '%s - "%s %s HTTP/%s" %d'
Arguments: ('127.0.0.1:60864', 'POST', '/api/v1/realtime-backtest/start', '1.1', 200)
2025-09-13 18:53:03.957 | INFO     | app.api.v1.realtime_backtest:_prepare_data:599 - ğŸ“Š ç›´æ¥ä»æ•°æ®åº“è·å–çœŸå®å†å²æ•°æ®: 2025-07-01 00:00:00 - 2025-07-31 00:00:00
2025-09-13 18:53:03.957 | INFO     | app.api.v1.realtime_backtest:_fetch_market_data:626 - ğŸ“Š æŸ¥è¯¢æ•°æ®åº“ä¸­çš„ BTC/USDT æ•°æ®...
/usr/lib/python3.12/selectors.py:468: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <Connection(Thread-1, started daemon 139021235783360)>>, which will be dropped, as it cannot be safely terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
  fd_event_list = self._selector.poll(timeout, max_ev)
2025-09-13 18:53:07.695 | INFO     | app.api.v1.realtime_backtest:_fetch_market_data:655 - âœ… BTC/USDT æ•°æ®åº“çœŸå®æ•°æ®åŠ è½½æˆåŠŸ: 113489 æ¡è®°å½•
2025-09-13 18:53:07.695 | INFO     | app.api.v1.realtime_backtest:_fetch_market_data:656 - ğŸ“ˆ æ•°æ®èŒƒå›´: 2025-07-01 13:12:00 åˆ° 2025-07-31 00:00:00
2025-09-13 18:53:09.972 | INFO     | app.api.v1.realtime_backtest:_run_backtest_logic:683 - ğŸ§® å¼€å§‹æ‰§è¡ŒçœŸå®ç­–ç•¥ä»£ç å›æµ‹...
2025-09-13 18:53:09.973 | INFO     | app.api.v1.realtime_backtest:_run_backtest_logic:703 - ğŸ“Š ç­–ç•¥å›æµ‹å‚æ•°: {'strategy_code': '# Simple test strategy\ndef on_data(data):\n    return {"signal": "hold"}', 'exchange': 'okx', 'symbols': ['BTC/USDT'], 'timeframes': ['1h'], 'start_date': '2025-07-01', 'end_date': '2025-07-31', 'initial_capital': 10000.0, 'fee_rate': 'vip0', 'data_type': 'kline'}
2025-09-13 18:53:09.973 | INFO     | app.services.backtest_service:execute_backtest:731 - æ‰§è¡Œå›æµ‹ï¼Œå‚æ•°: {'strategy_code': '# Simple test strategy\ndef on_data(data):\n    return {"signal": "hold"}', 'exchange': 'okx', 'symbols': ['BTC/USDT'], 'timeframes': ['1h'], 'start_date': '2025-07-01', 'end_date': '2025-07-31', 'initial_capital': 10000.0, 'fee_rate': 'vip0', 'data_type': 'kline'}
2025-09-13 18:53:10.034 | INFO     | app.services.backtest_service:_get_historical_data:133 - è·å–å†å²æ•°æ®: okx BTC/USDT 1h 2025-07-01 00:00:00-2025-07-31 00:00:00
2025-09-13 18:53:10.197 | INFO     | app.services.backtest_service:_get_historical_data:166 - âœ… æˆåŠŸè·å–OKXå†å²æ•°æ®: 4507æ¡è®°å½•
2025-09-13 18:53:10.197 | INFO     | app.services.backtest_service:_get_historical_data:167 -    æ•°æ®æ—¶é—´èŒƒå›´: 2025-07-01 14:00:00 åˆ° 2025-09-12 16:00:00
2025-09-13 18:53:10.232 | INFO     | app.services.backtest_service:execute_backtest:789 - æˆåŠŸå‡†å¤‡å›æµ‹æ•°æ®: 4507 æ¡è®°å½•ï¼Œæ—¶é—´èŒƒå›´: 2025-07-01 06:00:00 åˆ° 2025-09-12 08:00:00
/root/trademe/backend/trading-service/app/services/backtest_service.py:262: RuntimeWarning: invalid value encountered in scalar divide
  daily_return = (self.total_value - prev_value) / prev_value
2025-09-13 18:53:11.445 | INFO     | app.services.backtest_service:execute_backtest:807 - å›æµ‹æ‰§è¡ŒæˆåŠŸï¼Œæ€»æ”¶ç›Šç‡: -100.00%
2025-09-13 18:53:11.448 | INFO     | app.api.v1.realtime_backtest:_run_backtest_logic:727 - âœ… ç­–ç•¥ä»£ç å›æµ‹æ‰§è¡ŒæˆåŠŸ
2025-09-13 18:53:17.450 | INFO     | app.api.v1.realtime_backtest:_execute_backtest:553 - å›æµ‹ä»»åŠ¡ ba3a1aec-89cd-4db7-90af-89dc03f8d1c8 å®Œæˆ
WARNING:  StatReload detected changes in 'app/api/v1/realtime_backtest.py'. Reloading...
2025-09-13 18:53:58 | uvicorn.error | INFO | Shutting down
2025-09-13 18:53:58 | uvicorn.error | INFO | Waiting for application shutdown.
âœ… æ•°æ®åº“è¿æ¥å·²å…³é—­
âœ… Redisè¿æ¥å·²å…³é—­
ğŸ‘‹ Trading Service å·²å…³é—­
2025-09-13 18:53:58 | uvicorn.error | INFO | Application shutdown complete.
2025-09-13 18:53:58 | uvicorn.error | INFO | Finished server process [3761437]
/usr/local/lib/python3.12/dist-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'schema_extra' has been renamed to 'json_schema_extra'
  warnings.warn(message, UserWarning)
2025-09-13 18:54:00.920 | INFO     | app.services.okx_service:__init__:116 - ğŸš€ OKXäº¤æ˜“æœåŠ¡åˆå§‹åŒ–å®Œæˆ
INFO:app.services.wallet_generator:å¤šé“¾é’±åŒ…ç”Ÿæˆå™¨åˆå§‹åŒ–å®Œæˆ
INFO:app.security.crypto_manager:åŠ å¯†ç®¡ç†å™¨åˆå§‹åŒ–å®Œæˆ
/usr/local/lib/python3.12/dist-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'schema_extra' has been renamed to 'json_schema_extra'
  warnings.warn(message, UserWarning)
âœ… ä½¿ç”¨logging.yamlé…ç½®æ–‡ä»¶
âœ… APIéªŒè¯ä¸­é—´ä»¶é›†æˆæˆåŠŸ
2025-09-13 18:54:01 | uvicorn.error | INFO | Started server process [3762604]
2025-09-13 18:54:01 | uvicorn.error | INFO | Waiting for application startup.
2025-09-13 18:54:01 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/auth/register, å­—æ®µæ•°: 2
2025-09-13 18:54:01 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/auth/login, å­—æ®µæ•°: 2
2025-09-13 18:54:01 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/trading/orders, å­—æ®µæ•°: 5
2025-09-13 18:54:01 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/strategies, å­—æ®µæ•°: 3
2025-09-13 18:54:01 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/ai/chat, å­—æ®µæ•°: 3
2025-09-13 18:54:01 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/market-data/klines, å­—æ®µæ•°: 3
2025-09-13 18:54:01 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/backtest, å­—æ®µæ•°: 5
2025-09-13 18:54:01 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/wallet/transfer, å­—æ®µæ•°: 3
2025-09-13 18:54:01 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/data/download, å­—æ®µæ•°: 5
âœ… æ•°æ®åº“åˆå§‹åŒ–æˆåŠŸ
ğŸ“‹ åŒ…å«çš„è¡¨ï¼šç”¨æˆ·ã€ç­–ç•¥ã€å›æµ‹ã€äº¤æ˜“ã€APIå¯†é’¥ã€å¸‚åœºæ•°æ®ã€Claudeå¯¹è¯ã€äº¤æ˜“å¿ƒå¾—
ğŸ“‹ ç®¡ç†åå°è¡¨ï¼šç®¡ç†å‘˜ã€Claudeä»£ç†æ± ã€USDTæ”¯ä»˜ã€æ•°æ®é‡‡é›†
âœ… Redisè¿æ¥æˆåŠŸ
ğŸ”‘ OKX APIè®¤è¯æˆåŠŸï¼Œå·²è¿æ¥åˆ°çœŸå®äº¤æ˜“æ¥å£
ğŸš€ Trading Service å¯åŠ¨æˆåŠŸ
ğŸ“Š ç¯å¢ƒ: development
ğŸ  Host: 0.0.0.0:8001
2025-09-13 18:54:01 | uvicorn.error | INFO | Application startup complete.
2025-09-13 18:54:34 | app.middleware.api_validation_middleware | INFO | APIè¯·æ±‚: {"method": "POST", "url": "http://localhost:8001/api/v1/realtime-backtest/start", "path": "/api/v1/realtime-backtest/start", "client_ip": "127.0.***.***.***", "user_agent": "curl/8.5.0", "timestamp": "2025-09-13T10:54:34.675155", "headers": {"host": "localhost:8001", "user-agent": "curl/8.5.0", "accept": "*/*", "content-type": "application/json", "authorization": "Bearer eyJhbGciOi...HjcBnE", "content-length": "290"}, "body": {"strategy_code": "# Simple test strategy\ndef on_data(data):\n    return {\"signal\": \"hold\"}", "exchange": "binance", "symbols": ["BTC/USDT"], "timeframes": ["1h"], "initial_capital": 10000.0, "start_date": "2025-07-01", "end_date": "2025-07-31", "data_type": "kline"}}
2025-09-13 18:54:34 | app.services.api_validation_service | WARNING | ç«¯ç‚¹éªŒè¯é…ç½®ä¸å­˜åœ¨: /api/v1/realtime-backtest/start
2025-09-13 18:54:34.677 | INFO     | app.middleware.structured_logging:log_request_start:139 - Request started
2025-09-13 18:54:34.682 | INFO     | app.middleware.structured_logging:log_request_end:181 - Request completed in 0.005s
2025-09-13 18:54:34 | app.middleware.api_validation_middleware | INFO | APIå“åº”: {"method": "POST", "path": "/api/v1/realtime-backtest/start", "status_code": 200, "duration": 7.35, "timestamp": "2025-09-13T10:54:34.682475"}
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.12/logging/__init__.py", line 464, in format
    return self._format(record)
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 460, in _format
    return self._fmt % values
           ~~~~~~~~~~^~~~~~~~
KeyError: 'duration'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.12/logging/handlers.py", line 73, in emit
    if self.shouldRollover(record):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/handlers.py", line 196, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 706, in format
    s = self.formatMessage(record)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 675, in formatMessage
    return self._style.format(record)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 466, in format
    raise ValueError('Formatting field not found in record: %s' % e)
ValueError: Formatting field not found in record: 'duration'
Call stack:
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.12/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.12/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/usr/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/usr/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
  File "/usr/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
  File "/usr/lib/python3.12/asyncio/base_events.py", line 1987, in _run_once
    handle._run()
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/dist-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/base.py", line 185, in __call__
    await response(scope, wrapped_receive, send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/base.py", line 214, in __call__
    await send(
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/errors.py", line 161, in _send
    await send(message)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/protocols/http/h11_impl.py", line 473, in send
    self.access_logger.info(
Message: '%s - "%s %s HTTP/%s" %d'
Arguments: ('127.0.0.1:55694', 'POST', '/api/v1/realtime-backtest/start', '1.1', 200)
2025-09-13 18:54:36.688 | INFO     | app.api.v1.realtime_backtest:_prepare_data:599 - ğŸ“Š ç›´æ¥ä»æ•°æ®åº“è·å–çœŸå®å†å²æ•°æ®: 2025-07-01 00:00:00 - 2025-07-31 00:00:00
2025-09-13 18:54:36.691 | INFO     | app.api.v1.realtime_backtest:_fetch_market_data:626 - ğŸ“Š æŸ¥è¯¢æ•°æ®åº“ä¸­çš„ BTC/USDT æ•°æ®...
2025-09-13 18:54:36.861 | ERROR    | app.api.v1.realtime_backtest:_fetch_market_data:667 - âŒ BINANCEäº¤æ˜“æ‰€çš„BTC/USDT åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´(2025-07-01 åˆ° 2025-07-31)å†…å†å²æ•°æ®ä¸è¶³ï¼ˆä»…0æ¡è®°å½•ï¼Œéœ€è¦è‡³å°‘10æ¡ï¼‰ï¼Œæ— æ³•è¿›è¡Œæœ‰æ•ˆå›æµ‹ã€‚
ğŸ’¡ å»ºè®®ï¼šç›®å‰ç³»ç»Ÿåªæœ‰OKXäº¤æ˜“æ‰€çš„æ•°æ®å¯ç”¨è¯·é€‰æ‹©æœ‰å……è¶³æ•°æ®çš„æ—¶é—´èŒƒå›´ã€äº¤æ˜“æ‰€æˆ–äº¤æ˜“å¯¹è¿›è¡Œå›æµ‹
2025-09-13 18:54:36.862 | ERROR    | app.api.v1.realtime_backtest:_fetch_market_data:672 - âŒ BTC/USDT æ•°æ®åº“æŸ¥è¯¢å¤±è´¥: âŒ BINANCEäº¤æ˜“æ‰€çš„BTC/USDT åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´(2025-07-01 åˆ° 2025-07-31)å†…å†å²æ•°æ®ä¸è¶³ï¼ˆä»…0æ¡è®°å½•ï¼Œéœ€è¦è‡³å°‘10æ¡ï¼‰ï¼Œæ— æ³•è¿›è¡Œæœ‰æ•ˆå›æµ‹ã€‚
ğŸ’¡ å»ºè®®ï¼šç›®å‰ç³»ç»Ÿåªæœ‰OKXäº¤æ˜“æ‰€çš„æ•°æ®å¯ç”¨è¯·é€‰æ‹©æœ‰å……è¶³æ•°æ®çš„æ—¶é—´èŒƒå›´ã€äº¤æ˜“æ‰€æˆ–äº¤æ˜“å¯¹è¿›è¡Œå›æµ‹
2025-09-13 18:54:36.862 | ERROR    | app.api.v1.realtime_backtest:_prepare_data:613 - âŒ æ•°æ®å‡†å¤‡å¤±è´¥: âŒ BINANCEäº¤æ˜“æ‰€çš„BTC/USDT åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´(2025-07-01 åˆ° 2025-07-31)å†…å†å²æ•°æ®ä¸è¶³ï¼ˆä»…0æ¡è®°å½•ï¼Œéœ€è¦è‡³å°‘10æ¡ï¼‰ï¼Œæ— æ³•è¿›è¡Œæœ‰æ•ˆå›æµ‹ã€‚
ğŸ’¡ å»ºè®®ï¼šç›®å‰ç³»ç»Ÿåªæœ‰OKXäº¤æ˜“æ‰€çš„æ•°æ®å¯ç”¨è¯·é€‰æ‹©æœ‰å……è¶³æ•°æ®çš„æ—¶é—´èŒƒå›´ã€äº¤æ˜“æ‰€æˆ–äº¤æ˜“å¯¹è¿›è¡Œå›æµ‹
2025-09-13 18:54:36.862 | ERROR    | app.api.v1.realtime_backtest:_execute_backtest:557 - å›æµ‹ä»»åŠ¡ 15f14dc8-ad6a-4853-bcd7-17b45fad17c5 å¤±è´¥: æ— æ³•è·å–å›æµ‹æ‰€éœ€çš„å†å²æ•°æ®: âŒ BINANCEäº¤æ˜“æ‰€çš„BTC/USDT åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´(2025-07-01 åˆ° 2025-07-31)å†…å†å²æ•°æ®ä¸è¶³ï¼ˆä»…0æ¡è®°å½•ï¼Œéœ€è¦è‡³å°‘10æ¡ï¼‰ï¼Œæ— æ³•è¿›è¡Œæœ‰æ•ˆå›æµ‹ã€‚
ğŸ’¡ å»ºè®®ï¼šç›®å‰ç³»ç»Ÿåªæœ‰OKXäº¤æ˜“æ‰€çš„æ•°æ®å¯ç”¨è¯·é€‰æ‹©æœ‰å……è¶³æ•°æ®çš„æ—¶é—´èŒƒå›´ã€äº¤æ˜“æ‰€æˆ–äº¤æ˜“å¯¹è¿›è¡Œå›æµ‹
2025-09-13 18:54:36.863 | ERROR    | app.api.v1.realtime_backtest:_execute_backtest:558 - å®Œæ•´é”™è¯¯å †æ ˆ: Traceback (most recent call last):
  File "/root/trademe/backend/trading-service/app/api/v1/realtime_backtest.py", line 610, in _prepare_data
    return await self._fetch_market_data(self.db_session, config, start_date, end_date)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/trademe/backend/trading-service/app/api/v1/realtime_backtest.py", line 673, in _fetch_market_data
    raise e
  File "/root/trademe/backend/trading-service/app/api/v1/realtime_backtest.py", line 668, in _fetch_market_data
    raise Exception(error_msg)
Exception: âŒ BINANCEäº¤æ˜“æ‰€çš„BTC/USDT åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´(2025-07-01 åˆ° 2025-07-31)å†…å†å²æ•°æ®ä¸è¶³ï¼ˆä»…0æ¡è®°å½•ï¼Œéœ€è¦è‡³å°‘10æ¡ï¼‰ï¼Œæ— æ³•è¿›è¡Œæœ‰æ•ˆå›æµ‹ã€‚
ğŸ’¡ å»ºè®®ï¼šç›®å‰ç³»ç»Ÿåªæœ‰OKXäº¤æ˜“æ‰€çš„æ•°æ®å¯ç”¨è¯·é€‰æ‹©æœ‰å……è¶³æ•°æ®çš„æ—¶é—´èŒƒå›´ã€äº¤æ˜“æ‰€æˆ–äº¤æ˜“å¯¹è¿›è¡Œå›æµ‹

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/trademe/backend/trading-service/app/api/v1/realtime_backtest.py", line 529, in _execute_backtest
    step_result = await step_info["action"](config, backtest_data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/trademe/backend/trading-service/app/api/v1/realtime_backtest.py", line 615, in _prepare_data
    raise Exception(f"æ— æ³•è·å–å›æµ‹æ‰€éœ€çš„å†å²æ•°æ®: {str(e)}")
Exception: æ— æ³•è·å–å›æµ‹æ‰€éœ€çš„å†å²æ•°æ®: âŒ BINANCEäº¤æ˜“æ‰€çš„BTC/USDT åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´(2025-07-01 åˆ° 2025-07-31)å†…å†å²æ•°æ®ä¸è¶³ï¼ˆä»…0æ¡è®°å½•ï¼Œéœ€è¦è‡³å°‘10æ¡ï¼‰ï¼Œæ— æ³•è¿›è¡Œæœ‰æ•ˆå›æµ‹ã€‚
ğŸ’¡ å»ºè®®ï¼šç›®å‰ç³»ç»Ÿåªæœ‰OKXäº¤æ˜“æ‰€çš„æ•°æ®å¯ç”¨è¯·é€‰æ‹©æœ‰å……è¶³æ•°æ®çš„æ—¶é—´èŒƒå›´ã€äº¤æ˜“æ‰€æˆ–äº¤æ˜“å¯¹è¿›è¡Œå›æµ‹

WARNING:  StatReload detected changes in 'app/api/v1/realtime_backtest.py'. Reloading...
2025-09-13 18:55:53 | uvicorn.error | INFO | Shutting down
2025-09-13 18:55:53 | uvicorn.error | INFO | Waiting for application shutdown.
âœ… æ•°æ®åº“è¿æ¥å·²å…³é—­
âœ… Redisè¿æ¥å·²å…³é—­
ğŸ‘‹ Trading Service å·²å…³é—­
2025-09-13 18:55:53 | uvicorn.error | INFO | Application shutdown complete.
2025-09-13 18:55:53 | uvicorn.error | INFO | Finished server process [3762604]
/usr/local/lib/python3.12/dist-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'schema_extra' has been renamed to 'json_schema_extra'
  warnings.warn(message, UserWarning)
2025-09-13 18:55:56.396 | INFO     | app.services.okx_service:__init__:116 - ğŸš€ OKXäº¤æ˜“æœåŠ¡åˆå§‹åŒ–å®Œæˆ
INFO:app.services.wallet_generator:å¤šé“¾é’±åŒ…ç”Ÿæˆå™¨åˆå§‹åŒ–å®Œæˆ
INFO:app.security.crypto_manager:åŠ å¯†ç®¡ç†å™¨åˆå§‹åŒ–å®Œæˆ
/usr/local/lib/python3.12/dist-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'schema_extra' has been renamed to 'json_schema_extra'
  warnings.warn(message, UserWarning)
âœ… ä½¿ç”¨logging.yamlé…ç½®æ–‡ä»¶
âœ… APIéªŒè¯ä¸­é—´ä»¶é›†æˆæˆåŠŸ
2025-09-13 18:55:57 | uvicorn.error | INFO | Started server process [3763432]
2025-09-13 18:55:57 | uvicorn.error | INFO | Waiting for application startup.
2025-09-13 18:55:57 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/auth/register, å­—æ®µæ•°: 2
2025-09-13 18:55:57 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/auth/login, å­—æ®µæ•°: 2
2025-09-13 18:55:57 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/trading/orders, å­—æ®µæ•°: 5
2025-09-13 18:55:57 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/strategies, å­—æ®µæ•°: 3
2025-09-13 18:55:57 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/ai/chat, å­—æ®µæ•°: 3
2025-09-13 18:55:57 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/market-data/klines, å­—æ®µæ•°: 3
2025-09-13 18:55:57 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/backtest, å­—æ®µæ•°: 5
2025-09-13 18:55:57 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/wallet/transfer, å­—æ®µæ•°: 3
2025-09-13 18:55:57 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/data/download, å­—æ®µæ•°: 5
âœ… æ•°æ®åº“åˆå§‹åŒ–æˆåŠŸ
ğŸ“‹ åŒ…å«çš„è¡¨ï¼šç”¨æˆ·ã€ç­–ç•¥ã€å›æµ‹ã€äº¤æ˜“ã€APIå¯†é’¥ã€å¸‚åœºæ•°æ®ã€Claudeå¯¹è¯ã€äº¤æ˜“å¿ƒå¾—
ğŸ“‹ ç®¡ç†åå°è¡¨ï¼šç®¡ç†å‘˜ã€Claudeä»£ç†æ± ã€USDTæ”¯ä»˜ã€æ•°æ®é‡‡é›†
âœ… Redisè¿æ¥æˆåŠŸ
ğŸ”‘ OKX APIè®¤è¯æˆåŠŸï¼Œå·²è¿æ¥åˆ°çœŸå®äº¤æ˜“æ¥å£
ğŸš€ Trading Service å¯åŠ¨æˆåŠŸ
ğŸ“Š ç¯å¢ƒ: development
ğŸ  Host: 0.0.0.0:8001
2025-09-13 18:55:57 | uvicorn.error | INFO | Application startup complete.
2025-09-13 18:55:58 | app.middleware.api_validation_middleware | INFO | APIè¯·æ±‚: {"method": "GET", "url": "http://localhost:8001/api/v1/realtime-backtest/start", "path": "/api/v1/realtime-backtest/start", "client_ip": "127.0.***.***.***", "user_agent": "curl/8.5.0", "timestamp": "2025-09-13T10:55:58.227604", "headers": {"host": "localhost:8001", "user-agent": "curl/8.5.0", "accept": "*/*"}, "query_params": {}}
2025-09-13 18:55:58 | app.services.integrated_cache_manager | WARNING | ç¼“å­˜ç®¡ç†å™¨å°šæœªåˆå§‹åŒ–
2025-09-13 18:55:58 | app.services.api_validation_service | WARNING | ç«¯ç‚¹éªŒè¯é…ç½®ä¸å­˜åœ¨: /api/v1/realtime-backtest/start
2025-09-13 18:55:58.228 | INFO     | app.middleware.structured_logging:log_request_start:139 - Request started
2025-09-13 18:55:58.230 | WARNING  | app.middleware.structured_logging:log_request_end:181 - Client error: 401
2025-09-13 18:55:58 | app.middleware.api_validation_middleware | INFO | APIå“åº”: {"method": "GET", "path": "/api/v1/realtime-backtest/start", "status_code": 401, "duration": 3.15, "timestamp": "2025-09-13T10:55:58.230709"}
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.12/logging/__init__.py", line 464, in format
    return self._format(record)
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 460, in _format
    return self._fmt % values
           ~~~~~~~~~~^~~~~~~~
KeyError: 'duration'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.12/logging/handlers.py", line 73, in emit
    if self.shouldRollover(record):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/handlers.py", line 196, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 706, in format
    s = self.formatMessage(record)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 675, in formatMessage
    return self._style.format(record)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 466, in format
    raise ValueError('Formatting field not found in record: %s' % e)
ValueError: Formatting field not found in record: 'duration'
Call stack:
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.12/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.12/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/usr/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/usr/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
  File "/usr/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
  File "/usr/lib/python3.12/asyncio/base_events.py", line 1987, in _run_once
    handle._run()
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/dist-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/base.py", line 185, in __call__
    await response(scope, wrapped_receive, send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/base.py", line 214, in __call__
    await send(
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/errors.py", line 161, in _send
    await send(message)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/protocols/http/h11_impl.py", line 473, in send
    self.access_logger.info(
Message: '%s - "%s %s HTTP/%s" %d'
Arguments: ('127.0.0.1:35514', 'GET', '/api/v1/realtime-backtest/start', '1.1', 401)
WARNING:  StatReload detected changes in 'app/api/v1/realtime_backtest.py'. Reloading...
2025-09-13 18:56:45 | uvicorn.error | INFO | Shutting down
2025-09-13 18:56:45 | uvicorn.error | INFO | Waiting for application shutdown.
âœ… æ•°æ®åº“è¿æ¥å·²å…³é—­
âœ… Redisè¿æ¥å·²å…³é—­
ğŸ‘‹ Trading Service å·²å…³é—­
2025-09-13 18:56:45 | uvicorn.error | INFO | Application shutdown complete.
2025-09-13 18:56:45 | uvicorn.error | INFO | Finished server process [3763432]
/usr/local/lib/python3.12/dist-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'schema_extra' has been renamed to 'json_schema_extra'
  warnings.warn(message, UserWarning)
2025-09-13 18:56:48.910 | INFO     | app.services.okx_service:__init__:116 - ğŸš€ OKXäº¤æ˜“æœåŠ¡åˆå§‹åŒ–å®Œæˆ
INFO:app.services.wallet_generator:å¤šé“¾é’±åŒ…ç”Ÿæˆå™¨åˆå§‹åŒ–å®Œæˆ
INFO:app.security.crypto_manager:åŠ å¯†ç®¡ç†å™¨åˆå§‹åŒ–å®Œæˆ
/usr/local/lib/python3.12/dist-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'schema_extra' has been renamed to 'json_schema_extra'
  warnings.warn(message, UserWarning)
âœ… ä½¿ç”¨logging.yamlé…ç½®æ–‡ä»¶
âœ… APIéªŒè¯ä¸­é—´ä»¶é›†æˆæˆåŠŸ
2025-09-13 18:56:49 | uvicorn.error | INFO | Started server process [3763870]
2025-09-13 18:56:49 | uvicorn.error | INFO | Waiting for application startup.
2025-09-13 18:56:49 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/auth/register, å­—æ®µæ•°: 2
2025-09-13 18:56:49 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/auth/login, å­—æ®µæ•°: 2
2025-09-13 18:56:49 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/trading/orders, å­—æ®µæ•°: 5
2025-09-13 18:56:49 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/strategies, å­—æ®µæ•°: 3
2025-09-13 18:56:49 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/ai/chat, å­—æ®µæ•°: 3
2025-09-13 18:56:49 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/market-data/klines, å­—æ®µæ•°: 3
2025-09-13 18:56:49 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/backtest, å­—æ®µæ•°: 5
2025-09-13 18:56:49 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/wallet/transfer, å­—æ®µæ•°: 3
2025-09-13 18:56:49 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/data/download, å­—æ®µæ•°: 5
âœ… æ•°æ®åº“åˆå§‹åŒ–æˆåŠŸ
ğŸ“‹ åŒ…å«çš„è¡¨ï¼šç”¨æˆ·ã€ç­–ç•¥ã€å›æµ‹ã€äº¤æ˜“ã€APIå¯†é’¥ã€å¸‚åœºæ•°æ®ã€Claudeå¯¹è¯ã€äº¤æ˜“å¿ƒå¾—
ğŸ“‹ ç®¡ç†åå°è¡¨ï¼šç®¡ç†å‘˜ã€Claudeä»£ç†æ± ã€USDTæ”¯ä»˜ã€æ•°æ®é‡‡é›†
âœ… Redisè¿æ¥æˆåŠŸ
ğŸ”‘ OKX APIè®¤è¯æˆåŠŸï¼Œå·²è¿æ¥åˆ°çœŸå®äº¤æ˜“æ¥å£
ğŸš€ Trading Service å¯åŠ¨æˆåŠŸ
ğŸ“Š ç¯å¢ƒ: development
ğŸ  Host: 0.0.0.0:8001
2025-09-13 18:56:49 | uvicorn.error | INFO | Application startup complete.
2025-09-13 18:59:52 | app.middleware.api_validation_middleware | INFO | APIè¯·æ±‚: {"method": "POST", "url": "http://localhost:8001/api/v1/realtime-backtest/start", "path": "/api/v1/realtime-backtest/start", "client_ip": "127.0.***.***.***", "user_agent": "curl/8.5.0", "timestamp": "2025-09-13T10:59:52.790169", "headers": {"host": "localhost:8001", "user-agent": "curl/8.5.0", "accept": "*/*", "content-type": "application/json", "authorization": "Bearer eyJhbGciOi...KBnrAk", "content-length": "191"}, "body": {"exchange": "binance", "symbol": "BTC/USDT", "timeframe": "1h", "start_date": "2024-01-01", "end_date": "2024-12-31", "initial_capital": 10000, "strategy_code": "def generate_signals(df):\n    return 1"}}
2025-09-13 18:59:52 | app.services.api_validation_service | WARNING | ç«¯ç‚¹éªŒè¯é…ç½®ä¸å­˜åœ¨: /api/v1/realtime-backtest/start
2025-09-13 18:59:52.792 | INFO     | app.middleware.structured_logging:log_request_start:139 - Request started
2025-09-13 18:59:52.793 | WARNING  | app.middleware.structured_logging:log_request_end:181 - Client error: 401
2025-09-13 18:59:52 | app.middleware.api_validation_middleware | INFO | APIå“åº”: {"method": "POST", "path": "/api/v1/realtime-backtest/start", "status_code": 401, "duration": 3.91, "timestamp": "2025-09-13T10:59:52.794039"}
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.12/logging/__init__.py", line 464, in format
    return self._format(record)
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 460, in _format
    return self._fmt % values
           ~~~~~~~~~~^~~~~~~~
KeyError: 'duration'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.12/logging/handlers.py", line 73, in emit
    if self.shouldRollover(record):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/handlers.py", line 196, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 706, in format
    s = self.formatMessage(record)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 675, in formatMessage
    return self._style.format(record)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/logging/__init__.py", line 466, in format
    raise ValueError('Formatting field not found in record: %s' % e)
ValueError: Formatting field not found in record: 'duration'
Call stack:
  File "<string>", line 1, in <module>
  File "/usr/lib/python3.12/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/usr/lib/python3.12/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/usr/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/usr/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
  File "/usr/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
  File "/usr/lib/python3.12/asyncio/base_events.py", line 1987, in _run_once
    handle._run()
  File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
  File "/usr/local/lib/python3.12/dist-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/base.py", line 185, in __call__
    await response(scope, wrapped_receive, send)
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/base.py", line 214, in __call__
    await send(
  File "/usr/local/lib/python3.12/dist-packages/starlette/middleware/errors.py", line 161, in _send
    await send(message)
  File "/usr/local/lib/python3.12/dist-packages/uvicorn/protocols/http/h11_impl.py", line 473, in send
    self.access_logger.info(
Message: '%s - "%s %s HTTP/%s" %d'
Arguments: ('127.0.0.1:41452', 'POST', '/api/v1/realtime-backtest/start', '1.1', 401)
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
2025-09-13 19:03:55 | uvicorn.error | INFO | Shutting down
2025-09-13 19:03:56 | uvicorn.error | INFO | Waiting for application shutdown.
âœ… æ•°æ®åº“è¿æ¥å·²å…³é—­
âœ… Redisè¿æ¥å·²å…³é—­
ğŸ‘‹ Trading Service å·²å…³é—­
2025-09-13 19:03:56 | uvicorn.error | INFO | Application shutdown complete.
2025-09-13 19:03:56 | uvicorn.error | INFO | Finished server process [3763870]
/usr/local/lib/python3.12/dist-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'schema_extra' has been renamed to 'json_schema_extra'
  warnings.warn(message, UserWarning)
2025-09-13 19:03:58.883 | INFO     | app.services.okx_service:__init__:116 - ğŸš€ OKXäº¤æ˜“æœåŠ¡åˆå§‹åŒ–å®Œæˆ
INFO:app.services.wallet_generator:å¤šé“¾é’±åŒ…ç”Ÿæˆå™¨åˆå§‹åŒ–å®Œæˆ
INFO:app.security.crypto_manager:åŠ å¯†ç®¡ç†å™¨åˆå§‹åŒ–å®Œæˆ
/usr/local/lib/python3.12/dist-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'schema_extra' has been renamed to 'json_schema_extra'
  warnings.warn(message, UserWarning)
âœ… ä½¿ç”¨logging.yamlé…ç½®æ–‡ä»¶
âœ… APIéªŒè¯ä¸­é—´ä»¶é›†æˆæˆåŠŸ
2025-09-13 19:03:59 | uvicorn.error | INFO | Started server process [3766436]
2025-09-13 19:03:59 | uvicorn.error | INFO | Waiting for application startup.
2025-09-13 19:03:59 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/auth/register, å­—æ®µæ•°: 2
2025-09-13 19:03:59 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/auth/login, å­—æ®µæ•°: 2
2025-09-13 19:03:59 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/trading/orders, å­—æ®µæ•°: 5
2025-09-13 19:03:59 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/strategies, å­—æ®µæ•°: 3
2025-09-13 19:03:59 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/ai/chat, å­—æ®µæ•°: 3
2025-09-13 19:03:59 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/market-data/klines, å­—æ®µæ•°: 3
2025-09-13 19:03:59 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/backtest, å­—æ®µæ•°: 5
2025-09-13 19:03:59 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/wallet/transfer, å­—æ®µæ•°: 3
2025-09-13 19:03:59 | app.services.api_validation_service | INFO | æ³¨å†Œç«¯ç‚¹éªŒè¯é…ç½®: /api/v1/data/download, å­—æ®µæ•°: 5
âœ… æ•°æ®åº“åˆå§‹åŒ–æˆåŠŸ
ğŸ“‹ åŒ…å«çš„è¡¨ï¼šç”¨æˆ·ã€ç­–ç•¥ã€å›æµ‹ã€äº¤æ˜“ã€APIå¯†é’¥ã€å¸‚åœºæ•°æ®ã€Claudeå¯¹è¯ã€äº¤æ˜“å¿ƒå¾—
ğŸ“‹ ç®¡ç†åå°è¡¨ï¼šç®¡ç†å‘˜ã€Claudeä»£ç†æ± ã€USDTæ”¯ä»˜ã€æ•°æ®é‡‡é›†
âœ… Redisè¿æ¥æˆåŠŸ
ğŸ”‘ OKX APIè®¤è¯æˆåŠŸï¼Œå·²è¿æ¥åˆ°çœŸå®äº¤æ˜“æ¥å£
ğŸš€ Trading Service å¯åŠ¨æˆåŠŸ
ğŸ“Š ç¯å¢ƒ: development
ğŸ  Host: 0.0.0.0:8001
2025-09-13 19:03:59 | uvicorn.error | INFO | Application startup complete.
2025-09-13 19:04:05 | uvicorn.error | INFO | Shutting down
2025-09-13 19:04:05 | uvicorn.error | INFO | Waiting for application shutdown.
âœ… æ•°æ®åº“è¿æ¥å·²å…³é—­
âœ… Redisè¿æ¥å·²å…³é—­
ğŸ‘‹ Trading Service å·²å…³é—­
2025-09-13 19:04:05 | uvicorn.error | INFO | Application shutdown complete.
2025-09-13 19:04:05 | uvicorn.error | INFO | Finished server process [3766436]
INFO:     Stopping reloader process [3761420]
